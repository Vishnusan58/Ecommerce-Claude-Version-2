<mat-toolbar color="primary" class="header-toolbar">
  <a routerLink="/products" class="logo">
    <mat-icon>shopping_cart</mat-icon>
    <span class="logo-text hide-mobile">E-Commerce</span>
  </a>

  <span class="spacer"></span>

  <nav class="nav-links hide-mobile">
    <a mat-button routerLink="/products" routerLinkActive="active">Products</a>
    @if (isLoggedIn) {
      <a mat-button routerLink="/wishlist" routerLinkActive="active">Wishlist</a>
      <a mat-button routerLink="/orders" routerLinkActive="active">Orders</a>
    }
  </nav>

  <span class="spacer"></span>

  <div class="actions">
    @if (isLoggedIn) {
      <!-- Cart Button -->
      <button mat-icon-button routerLink="/cart" [matBadge]="cartItemCount" matBadgeColor="accent" [matBadgeHidden]="cartItemCount === 0">
        <mat-icon>shopping_cart</mat-icon>
      </button>

      <!-- User Menu -->
      <button mat-button [matMenuTriggerFor]="userMenu" class="user-menu-button">
        <mat-icon>account_circle</mat-icon>
        <span class="hide-mobile">{{ currentUser?.name }}</span>
        @if (isPremium) {
          <span class="badge-premium">Premium</span>
        }
        <mat-icon>arrow_drop_down</mat-icon>
      </button>

      <mat-menu #userMenu="matMenu">
        <button mat-menu-item routerLink="/profile">
          <mat-icon>person</mat-icon>
          <span>Profile</span>
        </button>
        <button mat-menu-item routerLink="/orders">
          <mat-icon>receipt_long</mat-icon>
          <span>My Orders</span>
        </button>
        <button mat-menu-item routerLink="/wishlist">
          <mat-icon>favorite</mat-icon>
          <span>Wishlist</span>
        </button>
        @if (isSeller) {
          <mat-divider></mat-divider>
          <button mat-menu-item routerLink="/seller/dashboard">
            <mat-icon>store</mat-icon>
            <span>Seller Dashboard</span>
          </button>
        }
        @if (isAdmin) {
          <mat-divider></mat-divider>
          <button mat-menu-item routerLink="/admin/dashboard">
            <mat-icon>admin_panel_settings</mat-icon>
            <span>Admin Dashboard</span>
          </button>
        }
        <mat-divider></mat-divider>
        <button mat-menu-item (click)="logout()">
          <mat-icon>logout</mat-icon>
          <span>Logout</span>
        </button>
      </mat-menu>
    } @else {
      <a mat-button routerLink="/login">Login</a>
      <a mat-raised-button color="accent" routerLink="/register">Register</a>
    }
  </div>
</mat-toolbar>
