<mat-toolbar color="primary" class="header-toolbar">
  <!-- Left: Site Logo/Brand Name -->
  <a routerLink="/products" class="brand-logo">
    <mat-icon class="brand-icon">storefront</mat-icon>
    <span class="brand-name">ShopEase</span>
  </a>

  <span class="spacer"></span>

  <!-- Center: Navigation Links -->
  <nav class="nav-links hide-mobile">
    <a mat-button routerLink="/products" routerLinkActive="active">Products</a>
    @if (isLoggedIn && !isSeller && !isAdmin) {
      <a mat-button routerLink="/wishlist" routerLinkActive="active">Wishlist</a>
      <a mat-button routerLink="/orders" routerLinkActive="active">Orders</a>
    }
    @if (isSeller) {
      <a mat-button routerLink="/seller/dashboard" routerLinkActive="active">Dashboard</a>
    }
    @if (isAdmin) {
      <a mat-button routerLink="/admin/dashboard" routerLinkActive="active">Admin</a>
    }
  </nav>

  <span class="spacer"></span>

  <!-- Right: Cart Icon & User Dropdown -->
  <div class="actions">
    @if (isLoggedIn) {
      <!-- Cart Button (hidden for sellers and admins) -->
      @if (!isSeller && !isAdmin) {
        <button mat-icon-button routerLink="/cart" [matBadge]="cartItemCount" matBadgeColor="accent" [matBadgeHidden]="cartItemCount === 0" matTooltip="Cart">
          <mat-icon>shopping_cart</mat-icon>
        </button>
      }

      <!-- User Menu -->
      <button mat-button [matMenuTriggerFor]="userMenu" class="user-menu-button">
        <mat-icon>account_circle</mat-icon>
        <span class="hide-mobile user-name">{{ currentUser?.name || 'User' }}</span>
        @if (isPremium) {
          <span class="badge-premium">Premium</span>
        }
        <mat-icon class="dropdown-icon">arrow_drop_down</mat-icon>
      </button>

      <mat-menu #userMenu="matMenu">
        <button mat-menu-item routerLink="/profile">
          <mat-icon>person</mat-icon>
          <span>Profile</span>
        </button>
        @if (!isSeller && !isAdmin) {
          <button mat-menu-item routerLink="/orders">
            <mat-icon>receipt_long</mat-icon>
            <span>My Orders</span>
          </button>
          <button mat-menu-item routerLink="/wishlist">
            <mat-icon>favorite</mat-icon>
            <span>Wishlist</span>
          </button>
        }
        @if (isSeller) {
          <mat-divider></mat-divider>
          <button mat-menu-item routerLink="/seller/dashboard">
            <mat-icon>store</mat-icon>
            <span>Seller Dashboard</span>
          </button>
        }
        @if (isAdmin) {
          <mat-divider></mat-divider>
          <button mat-menu-item routerLink="/admin/dashboard">
            <mat-icon>admin_panel_settings</mat-icon>
            <span>Admin Dashboard</span>
          </button>
        }
        <mat-divider></mat-divider>
        <button mat-menu-item (click)="logout()">
          <mat-icon>logout</mat-icon>
          <span>Logout</span>
        </button>
      </mat-menu>
    } @else {
      <a mat-button routerLink="/login" class="login-btn">Login</a>
      <a mat-raised-button color="accent" routerLink="/register" class="register-btn">Register</a>
    }
  </div>
</mat-toolbar>
